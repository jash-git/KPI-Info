(function(window,document){var ef=function(){};window.console=window.console||{log:ef,warn:ef,error:ef,dir:ef};if(!Array.prototype.findIndex){Array.prototype.findIndex=function(predicate){"use strict";if(this==null){throw new TypeError("Array.prototype.findIndex called on null or undefined")}if(typeof predicate!=="function"){throw new TypeError("predicate must be a function")}var list=Object(this);var length=list.length>>>0;var thisArg=arguments[1];var value;for(var i=0;i<length;i++){value=list[i];if(predicate.call(thisArg,value,i,list)){return i}}return-1}}if(!Array.prototype.filter){Array.prototype.filter=function(fun){"use strict";if(this===void 0||null===this){throw new TypeError}var t=Object(this),len=t.length>>>0,res=[],thisArg,i,val;if("function"!==typeof fun){throw new TypeError}res=[];thisArg=arguments.length>=2?arguments[1]:void 0;for(i=0;i<len;i++){if(i in t){val=t[i];if(fun.call(thisArg,val,i,t)){res.push(val)}}}return res}}var hasInit=false;document.addEventListener("readystatechange",detectReady);window.PIXFalcon=function(){function PIXFalcon(){}PIXFalcon.prototype.placeAds=function(selectors){var elementList,numElements,i;if(document===selectors){init(document);return}elementList=document.querySelectorAll(selectors);numElements=elementList.length;if(0===numElements){return}for(i=0;i<numElements;i++){init(elementList[i])}};return PIXFalcon}();detectReady();function detectReady(){if(!hasInit&&"loading"!==document.readyState){hasInit=true;window.setTimeout(function(){init(document)},0)}}function init(baseElement){var i,len,ids=[],ads=[],elements=baseElement.querySelectorAll("ins.adsbyfalcon");for(i=0,len=elements.length;i<len;i++){var elem=elements[i],slotId=elem.getAttribute("data-ad-slot"),sizes=parseJson(elem.getAttribute("data-ad-sizes")),sortedSizes,closestAd;var width=elem.offsetWidth||0,height=elem.offsetHeight||0;if(slotId&&!isAdProcessing(elem)&&!isAdDone(elem)){ids.push(slotId);if(sizes){sortedSizes=concatViewportAdSizes(adSizesMapToArray(sizes)).sort(compareByWidthFirstThanHeight);closestAd=findClosetCandidateAdFromSortedAdSizes(sortedSizes);slotId=closestAd?closestAd.slot:slotId}ads.push({id:slotId,width:width,height:height,element:elem});markAdProcessing(elem)}}if(ids.length){getAds(ads,function success(res){if(isArray(res.ad_slots)&&res.ad_slots.length){generateAds(ads,res.ad_slots)}})}}function findClosetCandidateAdFromSortedAdSizes(sortedSizes){var closestAd,sizes,clientWidth=calcClientWidthHeightAllowOffset().width;sizes=sortedSizes.filter(function(obj){return clientWidth>=obj.width});if(1===sizes.length){sizes=sortedSizes.reverse().slice(0,2);sizes=sizes.filter(function(item){return{}.hasOwnProperty.call(item,"slot")});return sizes[0]}var index=sizes.findIndex(function(item){return!item.slot&&item.width===clientWidth});var before=index-1,after=index+1,viewportWidth=sortedSizes[index].width,beforeWidth,afterWidth;if(0===index){closestAd=sizes[1]}else if(sizes.length-1===index){closestAd=sizes[before]}else{beforeWidth=sizes[before].width;afterWidth=sizes[after].width;if(Math.abs(afterWidth-viewportWidth)<Math.abs(beforeWidth-viewportWidth)){closestAd=sizes[after]}else{closestAd=sizes[before]}}return closestAd}function calcClientWidthHeightAllowOffset(){var width=Math.max(window.innerWidth,document.documentElement.clientWidth),height=Math.max(window.innerHeight,document.documentElement.clientHeight);if(793<=width&&width<=807){width=800}if(1017<=width&&width<=1031){width=1024}return{width:width,height:height}}function concatViewportAdSizes(adSizes){var searchTarget=calcClientWidthHeightAllowOffset();return adSizes.concat([searchTarget])}function adSizesMapToArray(map){var ret=[],key;for(key in map){if(map.hasOwnProperty(key)){ret.push({resolution:key,slot:map[key],width:Math.floor(key.match(/^\d+/)[0]),height:Math.floor(key.match(/\d+$/)[0])})}}return ret}function compareByWidthFirstThanHeight(a,b){if(a.width!==b.width){return b.width>a.width?1:b.width<a.width?-1:0}return b.height>a.height?1:b.height<a.height?-1:0}function generateAds(ads,slots){while(slots.length){var slot=slots.shift(),ad=ads.shift();if(ad&&!isAdDone(ad.element)){str2DOMElement(ad.element,ad.width,ad.height,slot.html);markAdDone(ad.element)}}}function str2DOMElement(elem,width,height,html){if("false"===elem.getAttribute("data-embed")){elem.innerHTML=html;runScript(elem);return}var frame=document.createElement("iframe"),defaultStyle="margin:0;padding:0;overflow:hidden;background-color:transparent;";frame.setAttribute("style",defaultStyle+"border:none;width:"+width+"px;height:"+height+"px;");frame.setAttribute("scrolling","no");elem.innerHTML="";elem.appendChild(frame);frame.contentDocument.open();frame.contentDocument.write(html);if(frame.contentDocument.body){frame.contentDocument.body.setAttribute("style",defaultStyle)}frame.contentDocument.close()}function runScript(node){if("SCRIPT"===node.tagName){node.parentNode.replaceChild(createScript(node),node);return node}var i=0,children=node.childNodes;while(i<children.length){runScript(children[i++])}return node}function createScript(node){var script=document.createElement("script");script.text=node.innerHTML;for(var i=node.attributes.length-1;i>=0;i--){script.setAttribute(node.attributes[i].name,node.attributes[i].value)}return script}function getAds(ads,successCallback){var demoAdNo=getQueryValue("demo_ad_no"),domeAdQuery=demoAdNo?"&demo_ad_no="+demoAdNo:"",adUrl="https://"+getAPIDomainByCurrentScript()+"/ad/json?"+getAdRequestListStr(ads)+"&version=2&t="+(new Date).getTime()+domeAdQuery,blogCategory=getMetaContent("falcon:blogcategory"),articleCategory=getMetaContent("falcon:articlecategory");if(blogCategory){adUrl+="&blog_category="+blogCategory}if(articleCategory){adUrl+="&article_category="+articleCategory}var oReq=new XMLHttpRequest;if(window.XDomainRequest){oReq=new XDomainRequest;oReq.onprogress=function(){};oReq.ontimeout=function(){};oReq.onerror=function(){}}oReq.onload=function(){successCallback(parseJson(this.responseText))};oReq.addEventListener&&oReq.addEventListener("error",function onError(err){},false);oReq.open("get",adUrl,true);oReq.withCredentials=true;oReq.send()}function getAdRequestListStr(ads){var str="";for(var i=0,len=ads.length;i<len;i++){str=str+getAdInfoRequestStr(ads[i])+(i!==len-1?"&":"")}return str}function getAdInfoRequestStr(ad){return"pos[]="+ad.id+","+ad.width+","+ad.height}function getAPIDomainByCurrentScript(){var domainPrefix=getMatchFalconScriptDomainPrefix()||"falcon";return domainPrefix+".pixanalytics.com"}function getMatchFalconScriptDomainPrefix(){var currentScripts=document.getElementsByTagName("script"),regex=/\/\/([^.]*falcon)-asset\.pixfs\.net/g;for(var i=0,len=currentScripts.length;i<len;i++){var findMatch=regex.exec(currentScripts[i].getAttribute("src"));if(findMatch){return findMatch[1]}}}function getMetaContent(property){var meta=document.querySelector('meta[property="'+property+'"]');return meta&&meta.getAttribute("content")}function isAdProcessing(elem){return checkAdStatue(elem,"processing")}function markAdProcessing(elem){return markAdStatus(elem,"processing")}function isAdDone(elem){return checkAdStatue(elem,"done")}function markAdDone(elem){return markAdStatus(elem,"done")}function checkAdStatue(elem,status){if(!elem){return false}return status===elem.getAttribute("data-adsbyfalcon-status")}function markAdStatus(elem,status){if(!elem){return false}return elem.setAttribute("data-adsbyfalcon-status",status)}function parseJson(str){try{return JSON.parse(str)}catch(e){return{}}}function getQueryValue(key){if(!key){return""}var query=window.location.search.substring(1),vars=query.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(pair[0]===key){return decodeURIComponent(pair[1].replace(/\+/g," "))}}return""}function isArray(obj){return obj&&obj instanceof Array}})(window,document);
